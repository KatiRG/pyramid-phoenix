[buildout]

extends = minimal.cfg

parts =
    conda
    phoenix
    phoenix_config
    phoenix_gunicorn
    phoenix_supervisor
    phoenix_nginx
    celery
# extensions
    mongodb
    redis
    pycsw
    solr
    nose 
    ipython  
    sphinx
    docker

[conda]
pkgs = nose ipython

[mongodb]
recipe = birdhousebuilder.recipe.mongodb
user = ${settings:user}
port = ${settings:mongodb-port}

[redis]
recipe = birdhousebuilder.recipe.redis
user = ${settings:user}

[pycsw]
recipe = birdhousebuilder.recipe.pycsw
hostname = ${settings:hostname}
port = ${settings:csw-port}
user = ${settings:user}

[solr]
recipe = birdhousebuilder.recipe.solr
hostname = ${settings:hostname}
http-port = ${settings:solr-port}

[sphinx]
recipe = birdhousebuilder.recipe.sphinx
project = ${settings:project}
version = ${settings:version}
src = phoenix

[docker]
recipe = birdhousebuilder.recipe.docker
maintainer = https://github.com/bird-house/pyramid-phoenix
description = Phoenix WPS Application
version = ${settings:version}
expose = 8090 9001 8081 8443
environment =
    OUTPUT_PORT=8090
    PHOENIX_PASSWORD="sha256:10761810a2f2:8535bf8468e0045ec2d33bd4d2f513d669bd31b79794614f23632c3b2cadc51c"
    WPS_URL=http://malleefowl:8091/wps

[nose]
recipe = zc.recipe.egg
eggs =
    nose
    ${phoenix:eggs}
entry-points =
    nosetests=nose:run_exit
scripts =
    nosetests=nosetests

[ipython]
recipe = zc.recipe.egg
eggs =
    IPython
    ${phoenix:eggs}
entry-points =
   ipython=IPython:start_ipython
scripts =
   ipython=ipython
