[buildout]

parts +=
    ipython_conda
    ipython_phoenix
    ipython_config
    ipython_supervisor
    ipython_deploy

[ipython_conda]
recipe = birdhousebuilder.recipe.conda
on_install = true
on_update = true
pkgs = ipython ipython-notebook

[ipython_phoenix]
recipe = z3c.recipe.scripts
eggs =
    IPython
    ${phoenix:eggs}
entry-points =
   ipython=IPython:start_ipython
scripts =
   ipython=ipython

[ipython_config]
recipe = collective.recipe.template
input = ${buildout:directory}/templates/ipython_notebook_config.py
output = ${buildout:anaconda-home}/etc/ipython_notebook_config.py

[ipython_supervisor]
recipe = birdhousebuilder.recipe.supervisor

program = ipython
command = ${buildout:bin-directory}/ipython notebook --no-mathjax --config=${ipython_config:output}
directory =  ${buildout:directory}/docs/notebook

[ipython_deploy]
recipe = collective.recipe.cmd
on_install = true
on_update = true
cmds =
    mkdir -p ${ipython_supervisor:directory}
