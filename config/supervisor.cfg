[supervisor_build]

parts =
      supervisor_install
      supervisor_config
      supervisor_reload

[supervisor_install]
recipe = collective.recipe.cmd
on_install = true
cmds =
    /opt/anaconda/bin/pip install supervisor --pre
    mkdir -p ${buildout:directory}/var/log/supervisor
    mkdir -p ${buildout:directory}/var/run

[supervisor_config]
recipe = collective.recipe.template
input = ${buildout:directory}/templates/supervisord.conf
output = ${buildout:directory}/etc/supervisor/supervisord.conf

[supervisor_reload]
recipe = collective.recipe.cmd
on_install = true
on_update = true
cmds =
     unset PYTHONPATH
     /opt/anaconda/bin/supervisorctl reload
