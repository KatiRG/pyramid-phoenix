<metal:block use-macro="main_template">

  <div metal:fill-slot="javascript">
    <script type="text/javascript">
  $('#loading-indicator').show();
  var timerId = 0;

  // update job table with current values
  var checkLogon = function() {
     $.getJSON(
      '/wizard/check_logon.json',
      {},
      function(json) {
        if (json.status == 'ready') {
          clearInterval(timerId);
          location.reload();
        }
      }
    );
  };

  // refresh job list each 1 secs ...
  timerId = setInterval(function() {
    checkLogon();
  }, 1000); 

    </script>
  </div>
        
  <div metal:fill-slot="content">
    <h3>Logon to ESGF ... </h3>
    <div id="loading-indicator" style="display: none;">
      <img src="${request.static_path('phoenix:static/images/loading-indicator.gif')}"></img>
    </div>
  </div>
   
</metal:block>
