<metal:block use-macro="main_template">
  
  <div metal:fill-slot="content">

    <legend>
      <h3>title</h3>
      <small>form_info</small>
    </legend>  

    <h4>Current Selections</h4>
    <div>
      <span class="tags">
        <a tal:repeat="(facet,item) constraints.iteritems()" href="${request.route_url('esgsearch', action='delete', facet=facet, item=item, _query=constraints)}">
          ${facet}:${item}
        </a>
      </span>
    </div>

    <h4>Search Categories</h4>
    <div>
      <span class="tags">
        <a tal:repeat="(facet,counts) ctx.get_facet_options().iteritems()" href="${request.route_url('esgsearch', action='update', facet=facet, item=None, _query=constraints)}">
          ${facet}
        </a>
      </span>
    </div>

    <h4>${facet}</h4>
    <div tal:condition="facet">
      <span class="tags">
        <a tal:repeat="(item,count) ctx.facet_counts[facet].iteritems()" href="${request.route_url('esgsearch', action='add', facet=facet, item=item, _query=constraints)}">
          ${item} (${count})
      </a>
      </span>
    </div>

    <span class="hits">${ctx.hit_count}</span> hits

  </div>
</metal:block>
