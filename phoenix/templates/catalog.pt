<metal:block use-macro="main_template">

  <div metal:fill-slot="javascript">
    <script src="${request.static_url('phoenix:static/js/catalog.js')}"></script>
  </div>
        
  <div metal:fill-slot="content">
    <!-- Button to trigger modal dialog for wps addition -->
    <a href="#catalog-form" role="button" class="btn btn-success" data-toggle="modal">
      Add WPS
    </a>
    <br/><br/>

    <table id="catalog-table" class="table table-striped accordion-group">
      <thead>
        <tr>
          <th>Title</th>
          <th>URL</th>
          <th>Username</th>
          <th>Abstract</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        <div tal:repeat="wps wps_list">
          <tr>
            <td>${wps.get('title', '')}</td>
            <td>
              <a href="${wps.get('url', '')}?SERVICE=WPS&VERSION=1.0.0&REQUEST=GetCapabilities"
                 target="_blank">
                ${wps.get('url', '')}
              </a>
            </td>
            <td>${wps.get('username', '')}</td>
            <td>${wps.get('abstract', '')}</td>
            <td>${wps.get('notes', '')}</td>
            <td>
              <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                  Action
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" id="${wps.get('url', '')}">
                  <li><a class="catalog-edit" href="#">Edit</a></li>
                  <li><a class="catalog-delete" href="#">Delete</a></li>
                </ul>
              </div>
            </td>
          </tr>
        </div>
      </tbody>
    </table>

    <!--! Add form for WPS -->
    <div id="catalog-form" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="task-form-label" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="task-form-label">Add WPS</h3>
      </div>
      <div class="modal-body">
        <tal:form replace="structure form" />
      </div>
    </div>
    
  </div>
   
</metal:block>
