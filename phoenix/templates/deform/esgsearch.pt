<div tal:define="name name|field.name;
                  size size|field.widget.size;
                  true_val true_val|field.widget.true_val;
                  css_class css_class|field.widget.css_class;
                  oid oid|field.oid;
                  style style|field.widget.style|None;
                  url url|field.widget.url;"
      i18n:domain="deform"
      tal:omit-tag="">
  ${field.start_mapping()}
  <p/>
  <label for="${oid}-hit-count" id="tm-hit-count">
    <input type="hidden" name="hit-count" value="0"
           id="${oid}-hit-count"/>
    Searching ...
  </label>
  <p/>

  <label for="" class="control-label">Options</label>
  <label for="${oid}-distrib" class="checkbox-inline">
    <input type="checkbox" name="distrib" value="${true_val}"
           tal:attributes="checked distrib == true_val;"
           id="${oid}-distrib"/>
    All Sites
  </label>

  <label for="${oid}-relica" class="checkbox-inline">
    <input type="checkbox" name="replica" value="${true_val}"
           tal:attributes="checked replica == true_val;"
           id="${oid}-replica"/>
    Including Replicas
  </label>
    
  <label for="${oid}-latest" class="checkbox-inline">
    <input type="checkbox" name="latest" value="${true_val}"
           tal:attributes="checked latest == true_val;"
           id="${oid}-latest"/>
    Latest Version
  </label>

  <label for="${oid}-temporal" class="checkbox-inline">
    <input type="checkbox" name="temporal" value="${true_val}"
           tal:attributes="checked temporal == true_val;"
           id="${oid}-temporal"/>
    Temporal
  </label>


  <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="headingOne">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            <i class="glyphicon glyphicon-chevron-down"></i> Freetext Search
          </a>
        </h4>
      </div>
      <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
        <div class="panel-body">
          <div class="input-group">
            <span class="input-group-addon" id="basic-addon1"><i class="glyphicon glyphicon-search"></i></span>
            <input type="text" name="query" value="${query}" placeholder="Enter your text here ..." class="form-control"
                   id="${oid}-query"/>
          </div>
        </div>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="headingTwo">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
            <i class="glyphicon glyphicon-chevron-down"></i> Current Selection
          </a>
        </h4>
      </div>
      <div id="collapseTwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingTwo">
        <div class="panel-body">
          <input type="text" name="Current Selection" class="tm-selection" 
                 id="tm-selection"/>
          <input type="hidden" name="facets" value="${facets}" 
                 id="${oid}-facets">
        </div>
      </div>
    </div>

     <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="headingThree">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
            <i class="glyphicon glyphicon-chevron-down"></i> Categories
          </a>
        </h4>
      </div>
      <div id="collapseThree" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingThree">
        <div class="panel-body">
          <input type="text" name="Search Categories" class="tm-facets"
                 id="tm-facets"/>
        </div>
      </div>
    </div>

     <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="headingFour">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#collapseFour" aria-expanded="true" aria-controls="collapseFour">
            <i class="glyphicon glyphicon-chevron-down"></i>
            <label for="tm-facet" class="control-label" 
                    id="search-label-category">
               Project
             </label>
          </a>
        </h4>
      </div>
      <div id="collapseFour" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingFour">
        <div class="panel-body">
          <input type="text" name="Categorie: xxx" class="tm-facet"
                 id="tm-facet"/>
        </div>
      </div>
    </div>

     <div class="panel panel-default">
      <div class="panel-heading" role="tab" id="headingFive">
        <h4 class="panel-title">
          <a data-toggle="collapse" href="#collapseFive" aria-expanded="true" aria-controls="collapseFive">
            <i class="glyphicon glyphicon-chevron-down"></i> Date
          </a>
        </h4>
      </div>
      <div id="collapseFive" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingFive">
        <div class="panel-body">
          <label>Date begins after:</label>
          <input value="yyyy-mm-dd" data-date-format="YYYY-MM-DD" type="text" name="start" value="${start}" class="form-control hasDatepicker"
                 id="${oid}-start"/>
          <label>Date ends before:</label>
          <input value="yyyy-mm-dd" data-date-format="YYYY-MM-DD" type="text" name="end" value="${end}" class="form-control hasDatepicker"
                 id="${oid}-end"/>
        </div>
      </div>
     </div>
  </div>

  ${field.end_mapping()}
  <script type="text/javascript">
    deform.addCallback(
      '${oid}',
      function (oid) {
        $.EsgDatasetSearch( {
           oid: oid,
           url: '${url}',
           });
    });
  </script>
</div>


