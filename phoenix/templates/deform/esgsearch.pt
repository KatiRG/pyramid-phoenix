<span tal:define="name name|field.name;
                  size size|field.widget.size;
                  css_class css_class|field.widget.css_class;
                  oid oid|field.oid;
                  mask mask|field.widget.mask;
                  mask_placeholder mask_placeholder|field.widget.mask_placeholder;
                  style style|field.widget.style|None;
                  url url|field.widget.url;"
      i18n:domain="deform"
      tal:omit-tag="">

${field.start_mapping()}
  <label id="search-label-counts">Searching ...</label>
  <p/>

  <input type="checkbox" name="distrib" value="distrib"
         id="${oid}-distrib"/>
  <span>Search All Sites</span>

  <input type="checkbox" name="replica" value="replica"
         id="${oid}-replica"/>
  <span>Search All Replicas</span>

  <input type="checkbox" name="all-versions" value="all-versions"
         id="${oid}-all-versions"/>
  <span>Search All Versions</span>

  <p/>

  <label for="tm-facets">Query</label>
  <input type="text" name="query" value="${query}"
         id="${oid}-query"/>
  <p/>
   
  <label for="tm-selection">Current Selection</label>
  <input type="text" name="Current Selection" class="tm-selection" 
         id="tm-selection"/>
  <input type="hidden" name="facets" value="${facets}" 
         id="${oid}-facets">
  <p/>

  <label for="tm-facets">Search Categories</label>
  <input type="text" name="Search Categories" class="tm-facets"
         id="tm-facets"/>
  <p/>
 
  <label for="tm-facet" id="search-label-category">Institute</label>
  <input type="text" name="Categorie: xxx" class="tm-facet"
         id="tm-facet"/>
  <p/>
${field.end_mapping()}

  <script type="text/javascript">
    deform.addCallback(
      '${oid}',
      function (oid) {
        $.EsgSearch( {
           oid: oid,
           url: '${url}',
           query: '${query}',
           distrib: '${distrib}'});
    });
  </script>
</span>


