<span tal:define="name name|field.name;
                  size size|field.widget.size;
                  css_class css_class|field.widget.css_class;
                  oid oid|field.oid;
                  mask mask|field.widget.mask;
                  mask_placeholder mask_placeholder|field.widget.mask_placeholder;
                  style style|field.widget.style|None;
"
      tal:omit-tag="">

    

    <span class="hits">${ctx.hit_count}</span> Datasets found

    <p/>

    <h4>Current Selections</h4>
    <div class="tag-box" >
      <span class="tag" tal:repeat="(facet,item) constraints.iteritems()">
        <div class="tag">${facet}:${item}</div>
        <a class="tag" href="">X</a>
      </span>
    </div>

    <p/>

    <h4>Search Categories</h4>
    <div>
      <span class="tags">

        <a tal:repeat="(facet,counts) ctx.get_facet_options().iteritems()" href="">
           ${facet}
        </a>
      </span>
    </div>

    <p/>

    <h4>Category: ${facet}</h4>
    <div tal:condition="facet">
      <span class="tags">
        <a tal:repeat="(item,count) ctx.facet_counts[facet].iteritems()" href="">
          ${item} (${count})
        </a>
      </span>
    </div>
    
    <p/>

    <input type="text" name="${name}" value="${cstruct}" 
           tal:attributes="size size;
                           class css_class;
                           style style"
           id="${oid}"/>
    <script tal:condition="mask" type="text/javascript">
      deform.addCallback(
         '${oid}',
         function (oid) {
            $("#" + oid).mask("${mask}", 
                 {placeholder:"${mask_placeholder}"});
         });
    </script>
</span>
