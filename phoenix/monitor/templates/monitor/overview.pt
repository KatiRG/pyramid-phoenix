<metal:block use-macro="main_template">

  <div metal:fill-slot="javascript">
    <script src="${request.static_path('phoenix:static/scripts/monitor.js')}"></script>
  </div>

  <div metal:fill-slot="content">

    <div class="panel panel-default">
      <div class="panel-body">
        
        <div class="form-group">
          <div class="btn-toolbar">
            <div class="btn-group">
              <a tal:attributes="class 'btn btn-default' if category else 'btn btn-default active'"
                 href="${request.route_path('monitor', _query=[('page', page)])}">
                All</a>
              <a tal:attributes="class 'btn btn-default active' if category=='public' else 'btn btn-default'"
                 href="${request.route_path('monitor', _query=[('category', 'public')])}">
                Public</a>
              <a tal:attributes="class 'btn btn-default active' if category=='private' else 'btn btn-default'"
                 href="${request.route_path('monitor', _query=[('category', 'private')])}">
                Private</a>
            </div>

            <div class="col-md-2">
              <label class="control-inline required">
                <select id="status-select" class="form-control">
                  <option value="${request.route_path('monitor', _query=[('page', page)])}">All</option>
                  <optgroup>
                    <option value="${request.route_path('monitor', _query=[('status', status)])}"
                            tal:attributes="selected True if status==selected_status else False"
                            tal:repeat="status ['ProcessQueued', 'ProcessPaused', 'ProcessSucceeded', 'ProcessFailed', 'ProcessStarted', 'ProcessAccepted']">${status}</option>
                  </optgroup>
                </select>
                Process Status:
              </label>
            </div>

          </div>
        </div>

        <div class="clearfix">

          <ul class="pagination pagination-sm pull-left">
            <li class="previous" tal:attributes="class 'previous' if page > 0 else 'previous disabled'">
              <a href="${request.route_path('monitor', _query=[('page', page-1)])}">
                <strong><i class="fa fa-angle-left"></i></strong>
              </a>
            </li>
          
            <li class="next" tal:attributes="class 'next' if end < hits else 'next disabled'">
              <a href="${request.route_path('monitor', _query=[('page', page+1)])}">
                <strong><i class="fa fa-angle-right"></i></strong>
              </a>
            </li>
          </ul>
        
          <h3 class="pull-right"> Showing ${start}-${end} of ${hits} </h3>
        </div>


        <table class="table table-striped">
          <tal:rows replace="structure grid" />
        </table>
      </div>
    </div>

  </div>
   
</metal:block>
